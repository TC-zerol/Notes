部分资料来自于互联网，如有侵权请联系删除。

Part of the information comes from the Internet, please contact to delete if there is any infringement.



作者：大妹子加油
链接：https://www.nowcoder.com/discuss/454567?type=post&order=time&pos=&page=1&channel=666&source_id=search_post
来源：牛客网



**2020.7.13南京shein一面(29分钟)**  

  **1、自我介绍**  

  **2、项目介绍（爬虫）**  

  **3、kafka怎么将文件存取到磁盘（我不太清楚问啥，没想到问segment，我一开始说生产者、消费者、broke，topic被他打断了，我就说难道是segment吗， zero copy 和页缓存？嗯就是segment，ok，segment有哪些文件，索引、log， 按照偏移量）**  

  **4、kafka的应用环境（解耦，削峰，异步）**  

  **5、我觉得你项目可以用redis、kafka更注重实时（我说，redis用内存，kafka用磁盘，我这边可能截图太慢，需要把它作为中间存取）好的**  

  **6、ThreadLocal了解吗？存在什么问题（Thread中ThreadLocal中有一个ThreadLocalMap, <Thread，Value>, 存取主内存中的副本，通过thread获取你需要的变量，内存泄露，每次用完手动关闭）**  

Threadlocal叫做线程变量，意思是ThreadLocal中填充的变量属于当前线程，该变量对其他线程而言是隔离的。ThreadLocal为变量在每个线程中都创建了一个副本，那么每个线程都可以访问自己内部的副本变量。

使用场景：

1.在进行对象跨层传递的时候，使用ThreadLocal可以避免多次传递，打破层次之间的约束。

2.线程间的数据隔离

3.经行事务操作，用于存储线程事务信息

4.数据库连接，Session会话管理

ThreadLocal其他几个注意的点：内存泄露，1、Thread中有一个map，就是ThreadLocalMap

2、ThreadLocalMap的key是ThreadLocal，值是我们自己设定的。

3、ThreadLocal是一个弱引用，当为null时，会被当成垃圾回收

4、重点来了，突然我们ThreadLocal是null了，也就是要被垃圾回收器回收了，但是此时我们的ThreadLocalMap生命周期和Thread的一样，它不会回收，这时候就出现了一个现象。那就是ThreadLocalMap的key没了，但是value还在，这就造成了内存泄漏。

  **7、redis哪些结构，你用过哪些， redis分布式锁（是说对象，不是基本结构，String，list, hash. set, zset，我主要用的string和list，爬虫代理和爬虫的分布式请求队列， setnx和redlock）** 

 Redis支持5种数据类型：string（字符串），hash（哈希），list（列表），set（集合），zset sorted set（有序集合）。

hash ：按 key 设置过期时间，过期后将会自动删除,放入用户session信息。

先拿setnx来争抢锁，抢到之后，再用epire给锁加一个过期时间防止锁忘记释放。

  **8、类加载过程。**  

1.加载

加载指java虚拟机查找字节流（查找.class文件），并更具字节流创建java.lang.Class对象的过程。这个过程，将类的.class文件中的二进制数据读入内存，放在运行时区域的方法区内，然后再堆中创建java.lang.Class对象，用来封装类再方法区的数据结构。

类的加载阶段：

（1）java虚拟机将.class文件读入内存，并为之创建一个Class对象。

（2）任何类型被使用时，系统都会为其创建一个且仅有一个Class对象。

（3）这个Class对象描述了这个类创建出来的对象的所有信息。比如有哪些构造方法，都有哪些成员方法，都有哪些成员变量等。

2.连接

连接包括验证、准备以及解析三个阶段。

（1）验证阶段。主要的目的是确保被加载的类（.class文件的字节流）满足java虚拟机规范，不会造成安全错误。

（2）准备阶段。负责为内的静态成员分配内存，并设置默认初始值

（3）解析阶段。将类的二进制数据中的符号引用替换为直接引用。

  **9、快排、数组和链表的区别**  

快速排序的原理：选择一个关键值作为基准值。比基准值小的都在左边序列（一般是无序的），比基准值大的都在右边（一般是无序的）。一般选择序列的第一个元素

第一次循环：从后往前比较，用基准值和最后一个值比较，如果比基准值小，交换位置，如果没有则比较下一个，直到找到第一个比基准值小的值才交换。找到这个值之后开始从前往后比较，如果有比基准值大的，交换位置，如果没有比较下一个，直到找到第一个比基准值大的值才交换。直到从前往后的比较索引>从后往前比较的索引，结束第一次循环，此时，对于基准值来说，左右两边就是有序的了。



（1）数组的元素个数是固定的，而组成链表的节点可按需增加或减少。

（2）数组元素的存储单元在数组定义时分配，链表节点的储存单元在执行时动态向系统申请。

（3）数组中的元素顺序关系由元素在数组中的位置（即下标）确定，链表中的节点顺序关系由包含节点的指针体现

（4）对于不是固定长度的列表,用可能最大长度的数组来描述，会浪费许多内存空间。

（5）对于元素的插人、删除操作非常频繁的列表处理场合,用数组表示列表也是不适宜的。若用链表实现，会使程序结构清晰，处理的方法也较为简便。

  **10、Java框架spring， 如何拦截的（我就照着网上的秒杀项目简单做了一下， 不太清楚你说的什么意思） 下一个**  

Spring提供的HandlerInterceptor

  **11、java泛型（类型擦拭，在没有上下界的情况下，编译完之后全部转化成object，存取通过类型转化）**  

泛型类的声明和非泛型类的声明类似，除了在类的后面添加了类型参数声明部分。和泛型方法一样，泛型类的类型参数声明也包含一个或多个类型参数，参数间用逗号隔开。一个泛型参数，也被称为一个类型变量，是用于指定一个泛型类名称的表示符。因为他们要接受一个或多个参数，这些类被称为参数化的类或参数化的类型。

类型擦除：java中的泛型基本上都是在编译器这个层次来实现的。在生成的java字节码中是不包含泛型中类型信息的，使用泛型的时候加上的类型参数，会在编译器编译的时候被去掉。这个过程就被称之为类型擦除。

如在代码中定义的List<Oject>和List<String>等类型，在编译之后都会变成List。JVM看到的只是List，而由泛型附加的类信息对JVM来说是不可见的。

类型擦除的基本过程也比较简单，首先是找到用来替换类型参数的具体类，这个具体类一般是Object。如果指定了类型参数的上界的话，则使用这个上界。把代码中的类型参数都替换成具体的类。

  **10、成绩怎么样呀，你来我们这边一周就得开始写代码，你有什么规划，最成就感、最失落（表白失败）** 

  
 

​    

  2020.7.15 南京shein二面（29分钟）  

  1、上次面试有什么没回答好吗？（kafka文件存储，秒杀的拦截器）  

  2、秒杀（redis这些怎么衡量标准，QPS，用redis之前和之后，用静态分离前后）  

  3、MySQL不应该只有这么点负载，你看过负载吗（没有）
 4、看你项目里面用了ES（我就讲了一下）
 5、这些都是你自己搭建的吗、kafka实例多少分区，多少实例（8， 1），爬虫多少台（docker部署），看过kafka的压力吗（没有）
 6、linux怎么批量杀死进程（pgerp |xargs kill -9）
 7、电脑开机怎么获取IP？流程(DHCP，MAC广播，找到DHCP服务器)，你这MAC没IP怎么弄（自己生成IP，广播看是否有冲突？）好吧 网关
 8、hash在怎么时候不是0（1）（冲突），还有什么（不知道），扩容
 9、hash底层不用数组，怎么实现O(1)（不是很清楚）  

​     

  2020.7.16 南京shein三面（37分钟）  

  1、自我介绍  

  2、项目  

  3、你的流量识别说一下，（论文）说着说着被打断了，你来说说***流量识别的例子（中国流量到国外经过网关，就可以看IP地址，或者识别常见的加密算法） 

  4、那你说说shadowsocks加密算法(不是很清楚，我看配置文件里面有RC4、CHANGxx256啥的)  

  5、平时怎么学习的，做过其他的项目吗（之前对安卓比较感兴趣，看了李刚的《疯狂的安卓讲义》，还帮别人妹子做了毕设，最近发现大家都弄秒杀，我也简单跑了下，感觉没啥用，准备用zookeeper搭建一个RPC框架）  

  6、那说说ZK的一致性算法吧（我记得也不是很清楚，我就简单的解释了一下）  

  7、看你用了docker,你来说说docker吧（项目驱动的，之前本来打算使用虚拟机的，但是发现太大，发现docker是一个应用级的就用了，之后再去看的，它主要是用linux里面的cgroup进行资源的限制和namespace进行命名空间的隔离，之后我就简单用了一下，然后编写一些dockerfile文件），说说cgroup的原理（具体我不太清楚，大概流程就是，linux,/sys/fs/cgroup下面有cpu、mem等目录，每个目录下有相关配置文件，可以创建相关目录，并在里面配置相关参数，然后运行程序绑定在上面就可以了）  

  8、看你用个ES，说一下（我就简单的搭建了一下，然后进行简单的查询和插入，两个节点），你确定是两个简单吗？（正常那个选举是需要过半的（quaxxx），我设置一个节点为数据节点，一个为可以竞选的，我再去看看）  

  9、说说快排吧（一面面试官也问了），那你说说算法复杂度吧（nlgn），分析一下最好，最坏（对半分，或者偏向一边），是稳定的吗（分析一波稳定排序，再说不是）  

  10、说下进程和线程吧（进程。。。。）  

  11、什么爱好呀（足球）， 你那个队的呀（巴萨，啥啥啥一大堆），平时喜欢看什么非技术书（本科辅修工商管理双学位，看些宏观经济学，微观经济学，明朝那些事等）  

  12、你有什么要问的吗（你们kafka、es这些，你们是有自己的版本吗还是），面试官巴拉巴拉说了一通，疫情对你们有影响吗？  

  13、你可以多了解我们公司，我们每年销售100多亿，老板比较低调，但是我们也有差不多2W员工，我们还没上市哦 

  
 

  2020.7.18 南京shein四面（7分钟13秒， 前一天HR打电话说，终面是CTO技术面和综合面，吓到我了，没想到最后和HR面差不多）
 1、家在哪呀？
 2、高考数学多少分？
 3、拿到几个offer了？
 4、今年疫情找工作有点难，你慌吗？
 5、平时都看些什么技术书籍呀？
 6、你的梦想是什么呀？
 7、你有什么要问的吗？